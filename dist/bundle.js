var $jscomp={scope:{},owns:function(a,b){return Object.prototype.hasOwnProperty.call(a,b)}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,b,c,e){if(b){c=$jscomp.global;a=a.split(".");for(e=0;e<a.length-1;e++){var d=a[e];d in c||(c[d]={});c=c[d]}a=a[a.length-1];e=c[a];b=b(e);b!=e&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var d=arguments[b];if(d)for(var f in d)$jscomp.owns(d,f)&&(a[f]=d[f])}return a}},"es6-impl","es3");
var module$src$utility={},Utility$$module$src$utility=function(){};Utility$$module$src$utility.prototype.unique=function(a){window.uid=window.uid||0;window.uid+=1;return a+String(window.uid)};Utility$$module$src$utility.prototype.SaferHTML=function(a){for(var b=a[0],c=1;c<arguments.length;c+=1)b+=String(arguments[c]).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),b+=a[c];return b};
Utility$$module$src$utility.prototype.findClassInParents=function(a,b,c){if(a.classList.contains(b))return a;if(a!==c&&a.parentNode)return this.findClassInParents(a.parentNode,b,c)};module$src$utility["default"]=Utility$$module$src$utility;var $jscomp$templatelit$0=['\n      <div class="list">\n        <ul class="thumb-list-a">\n        </ul>\n      </div>\n    '];$jscomp$templatelit$0.raw=['\n      <div class="list">\n        <ul class="thumb-list-a">\n        </ul>\n      </div>\n    '];var module$src$list_template={},utility$$module$src$list_template=new module$src$utility["default"],ListTemplate$$module$src$list_template=function(){this.template=null};
ListTemplate$$module$src$list_template.prototype.renderTemplate=function(){return this.template=utility$$module$src$list_template.SaferHTML($jscomp$templatelit$0)};var $jscompDefaultExport$$module$src$list_template=ListTemplate$$module$src$list_template;module$src$list_template["default"]=$jscompDefaultExport$$module$src$list_template;var $jscomp$templatelit$1='\n      <li class="list-item" data-id=";" data-index=";">\n        <div class="list-item-cont">\n          <div class="thumb"><img src=";" height=";" width=";" alt=";" /></div>\n          <div class="title">;</div>\n      </li>\n    '.split(";");$jscomp$templatelit$1.raw='\n      <li class="list-item" data-id=";" data-index=";">\n        <div class="list-item-cont">\n          <div class="thumb"><img src=";" height=";" width=";" alt=";" /></div>\n          <div class="title">;</div>\n      </li>\n    '.split(";");
var module$src$list_item_template={},utility$$module$src$list_item_template=new module$src$utility["default"],ListItemTemplate$$module$src$list_item_template=function(){this.template=null};ListItemTemplate$$module$src$list_item_template.prototype.renderTemplate=function(a){return this.template=utility$$module$src$list_item_template.SaferHTML($jscomp$templatelit$1,a.id,a.index,a.src,a.height,a.width,a.title,a.title)};var $jscompDefaultExport$$module$src$list_item_template=ListItemTemplate$$module$src$list_item_template;
module$src$list_item_template["default"]=$jscompDefaultExport$$module$src$list_item_template;var module$src$list_item={},listItemTemplate$$module$src$list_item=new module$src$list_item_template["default"],ListItem$$module$src$list_item=function(){this.photo=this.template=this.domNode=this.containerNode=this.index=null};ListItem$$module$src$list_item.prototype.init=function(a){Object.assign(this,a);this.render()};
ListItem$$module$src$list_item.prototype.render=function(){var a={width:parseInt(this.photo.width_q,10),height:parseInt(this.photo.height_q,10),src:this.photo.url_q,description:this.photo.description._content,title:this.photo.title,index:this.index,id:this.photo.id};this.template=listItemTemplate$$module$src$list_item.renderTemplate(a);this.containerNode.insertAdjacentHTML("beforeend",this.template);this.domNode=this.containerNode.querySelector('.list-item[data-id="'+this.photo.id+'"]');this.postRender()};
ListItem$$module$src$list_item.prototype.postRender=function(){};var $jscompDefaultExport$$module$src$list_item=ListItem$$module$src$list_item;module$src$list_item["default"]=$jscompDefaultExport$$module$src$list_item;var $jscomp$templatelit$2=['\n      <div class="popup-cont-cont-cont">\n        <div class="popup-cont-cont">\n          <div class="popup-cont" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n            <div class="popup-dialog">\n              <div class="popup-content">\n                <div class="popup-header">\n                  <a href="#" class="popup-close" aria-label="Close"></a>\n                  \x3c!--<h4 class="popup-title" id="myModalLabel">','</h4>--\x3e\n                </div>\n                <div class="popup-body">\n                  ',
'\n                </div>\n                <div class="popup-controls">\n                  <div class="popup-controls-cont">\n                    <div class="popup-controls-cont-cont">\n                      <div class="left"><a href="#"><span>&#x25E3;</span></a></div>\n                      <div class="right"><a href="#"><span>&#x25E3;</span></a></div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    '];
$jscomp$templatelit$2.raw=['\n      <div class="popup-cont-cont-cont">\n        <div class="popup-cont-cont">\n          <div class="popup-cont" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n            <div class="popup-dialog">\n              <div class="popup-content">\n                <div class="popup-header">\n                  <a href="#" class="popup-close" aria-label="Close"></a>\n                  \x3c!--<h4 class="popup-title" id="myModalLabel">','</h4>--\x3e\n                </div>\n                <div class="popup-body">\n                  ',
'\n                </div>\n                <div class="popup-controls">\n                  <div class="popup-controls-cont">\n                    <div class="popup-controls-cont-cont">\n                      <div class="left"><a href="#"><span>&#x25E3;</span></a></div>\n                      <div class="right"><a href="#"><span>&#x25E3;</span></a></div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    '];
var module$src$popup_template={},utility$$module$src$popup_template=new module$src$utility["default"],PopupTemplate$$module$src$popup_template=function(){this.template=null};PopupTemplate$$module$src$popup_template.prototype.renderTemplate=function(a){return this.template=utility$$module$src$popup_template.SaferHTML($jscomp$templatelit$2,a.title,a.body)};var $jscompDefaultExport$$module$src$popup_template=PopupTemplate$$module$src$popup_template;module$src$popup_template["default"]=$jscompDefaultExport$$module$src$popup_template;var $jscomp$templatelit$3='\n      <div class="lightbox-cont">\n        <img src=";" height=";" width=";" alt=";" />\n      </div>\n      <div class="lightbox-title">\n        ;\n      </div>\n    '.split(";");$jscomp$templatelit$3.raw='\n      <div class="lightbox-cont">\n        <img src=";" height=";" width=";" alt=";" />\n      </div>\n      <div class="lightbox-title">\n        ;\n      </div>\n    '.split(";");
var module$src$lightbox_template={},utility$$module$src$lightbox_template=new module$src$utility["default"],LightboxTemplate$$module$src$lightbox_template=function(){this.template=null};LightboxTemplate$$module$src$lightbox_template.prototype.renderTemplate=function(a){return this.template=utility$$module$src$lightbox_template.SaferHTML($jscomp$templatelit$3,a.url,a.height,a.width,a.title,a.title)};var $jscompDefaultExport$$module$src$lightbox_template=LightboxTemplate$$module$src$lightbox_template;
module$src$lightbox_template["default"]=$jscompDefaultExport$$module$src$lightbox_template;var module$src$popup={},utility$$module$src$popup=new module$src$utility["default"],popupTemplate$$module$src$popup=new module$src$popup_template["default"],lightboxTemplate$$module$src$popup=new module$src$lightbox_template["default"],Popup$$module$src$popup=function(){this.index=this.lightboxTemplate=this.template=this.rightNode=this.leftNode=this.containerNode=this.contentNode=this.bodyNode=this.maskNode=this.domNode=this.id=null;this.photos=[];this.total=this.photo=null;this.openFlag=!1};
Popup$$module$src$popup.prototype.init=function(a){Object.assign(this,a);this.render()};
Popup$$module$src$popup.prototype.render=function(){if(null==this.domNode){this.template=popupTemplate$$module$src$popup.renderTemplate({title:"",body:""});var a=utility$$module$src$popup.unique("mask_"),b=utility$$module$src$popup.unique("popupbody_");document.body.insertAdjacentHTML("beforeend",'<div class="popup" id="'+this.id+'"></div><div class="popup-mask" id="'+a+'"></div>');this.domNode=document.getElementById(this.id);this.maskNode=document.getElementById(a);this.domNode.innerHTML=this.template;
this.bodyNode=this.domNode.querySelector(".popup-body");this.bodyNode.id=b;this.contentNode=this.domNode.querySelector(".popup-content");this.containerNode=this.domNode.querySelector(".popup-cont");this.leftNode=this.domNode.querySelector(".popup-controls .left");this.rightNode=this.domNode.querySelector(".popup-controls .right")}this.postRender()};
Popup$$module$src$popup.prototype.postRender=function(){var a=this;this.domNode.querySelector(".popup-close").addEventListener("click",function(b){b.stopPropagation();a.close()});this.contentNode.addEventListener("mouseover",function(){a.contentNode.classList.add("hover")});this.contentNode.addEventListener("mouseout",function(){a.contentNode.classList.remove("hover")});this.containerNode.addEventListener("click",function(b){a.contentNode.classList.contains("hover")||(b.preventDefault(),a.close())});
document.addEventListener("keyup",function(b){a.openFlag&&(13!==b.keyCode&&27!==b.keyCode&&32!==b.keyCode||a.close(),37===b.keyCode&&a.prev(),39===b.keyCode&&a.next())});this.leftNode.addEventListener("click",function(b){b.preventDefault();a.prev()});this.rightNode.addEventListener("click",function(b){b.preventDefault();a.next()})};
Popup$$module$src$popup.prototype.reRender=function(a){for(;this.bodyNode.firstChild;)this.bodyNode.removeChild(this.bodyNode.firstChild);this.index=a.index;"photos"in a&&(this.photos=a.photos);"total"in a&&(this.total=a.total);this.photo=this.photos[this.index];a={title:this.photo.title,url:this.photo.url_l,index:this.index,total:this.total,height:parseInt(this.photo.height_l,10),width:parseInt(this.photo.width_l,10)};this.lightboxTemplate=lightboxTemplate$$module$src$popup.renderTemplate(a);this.bodyNode.innerHTML=
this.lightboxTemplate;0===this.index?this.contentNode.classList.add("first"):this.contentNode.classList.remove("first");this.index===this.photos.length-1?this.contentNode.classList.add("last"):this.contentNode.classList.remove("last")};Popup$$module$src$popup.prototype.show=function(a){this.reRender(a);this.domNode.classList.add("shown");document.body.classList.add("popup-on");this.openFlag=!0};
Popup$$module$src$popup.prototype.close=function(){this.domNode.classList.remove("shown");document.body.classList.remove("popup-on");this.openFlag=!0};Popup$$module$src$popup.prototype.prev=function(){0<this.index&&this.reRender({index:this.index-1})};Popup$$module$src$popup.prototype.next=function(){this.index<this.photos.length-1&&this.reRender({index:this.index+1})};var $jscompDefaultExport$$module$src$popup=Popup$$module$src$popup;module$src$popup["default"]=$jscompDefaultExport$$module$src$popup;var module$src$list={},utility$$module$src$list=new module$src$utility["default"],listTemplate$$module$src$list=new module$src$list_template["default"],List$$module$src$list=function(){this.template=this.domNode=this.containerNode=this.id=null;this.listItems={};this.photos=[];this.popup=new module$src$popup["default"];this.total=null};List$$module$src$list.prototype.init=function(a){Object.assign(this,a);this.render()};
List$$module$src$list.prototype.render=function(){this.template=listTemplate$$module$src$list.renderTemplate({name:'list name & <> ""'});this.containerNode.innerHTML=this.template;this.domNode=this.containerNode.querySelector(".list");this.domNode.id=this.id;this.postRender()};
List$$module$src$list.prototype.postRender=function(){var a=this;this.domNode.addEventListener("click",function(b){var c=utility$$module$src$list.findClassInParents(b.target,"list-item",a.domNode);void 0!==c&&(b.stopPropagation(),a.showLightbox(parseInt(c.dataset.index,10)))});this.getListData()};
List$$module$src$list.prototype.getListData=function(a){a=void 0===a?0:a;var b=this,c=new Date(Date.now()-864E5*a),c=c.getFullYear()+"-"+(c.getMonth()+1)+"-"+c.getDate(),e=[],d=new XMLHttpRequest;d.open("GET","https://api.flickr.com/services/rest/?method=flickr.interestingness.getList&api_key=bb36a2c0ab02c66df673e1dad6916cd7&format=json&nojsoncallback=1&extras=can_comment%2Ccount_comments%2Ccount_faves%2Cdescription%2Cisfavorite%2Clicense%2Cmedia%2Cneeds_interstitial%2Cowner_name%2Cpath_alias%2Crealname%2Crotation%2Curl_c%2Curl_l%2Curl_m%2Curl_n%2Curl_q%2Curl_s%2Curl_sq%2Curl_t%2Curl_z&per_page=20&page=1&date="+
c+"&viewerNSID=&csrf=&hermes=1&hermesClient=1");d.onload=function(){400<=d.status?console.error("request failed!"):(e=JSON.parse(d.responseText),"stat"in e&&"fail"===e.stat?b.getListData(a+1):b.initPhotos(e))};d.onerror=function(){console.error("request failed!")};d.send()};
List$$module$src$list.prototype.initPhotos=function(a){var b=this;"photos"in a&&"photo"in a.photos&&a.photos.photo.forEach(function(c,e){var d=new module$src$list_item["default"],f=a.photos.page*(e+1)-1;d.init({photo:c,index:f,containerNode:b.domNode.querySelector(".thumb-list-a")});b.listItems[c.id]=d;b.photos[f]=c});"photos"in a&&"total"in a.photos&&(this.total=a.photos.total)};
List$$module$src$list.prototype.showLightbox=function(a){this.popup.init({id:utility$$module$src$list.unique("popup_")});this.popup.show({photos:this.photos,index:a,total:this.total})};var $jscompDefaultExport$$module$src$list=List$$module$src$list;module$src$list["default"]=$jscompDefaultExport$$module$src$list;var utility$$module$src$app=new module$src$utility["default"],main$$module$src$app=function(){(new module$src$list["default"]).init({id:utility$$module$src$app.unique("list_"),containerNode:document.querySelector(".list-cont")})};window.addEventListener("load",main$$module$src$app);
